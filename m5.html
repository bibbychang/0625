<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Monopoly Maze Board</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    #board {
      display: grid;
      grid-template-columns: repeat(30, 20px);
      grid-template-rows: repeat(30, 20px);
      gap: 2px;
      position: relative;
    }
    .cell {
      width: 20px;
      height: 20px;
      background-color: #eee;
    }
    .path {
      background-color: #ffe082;
      position: relative;
    }
    .cell img {
      width: 100%;
      height: 100%;
    }
    .player {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      position: absolute;
      z-index: 2;
    }
    .player1 {
      background-color: red;
    }
    .player2 {
      background-color: blue;
    }
  </style>
</head>
<body>
  <h1>Maze-style Monopoly Board</h1>
  <div id="board"></div>
  <script>
    const board = document.getElementById("board");
    const gridSize = 30;
    const maxSteps = 20;
    const cells = [];
    const imagePool = [
      "warning2.png", "ok1.png", "underdesk.png", "rain2.png", "ok3.png",
      "quiz.png", "safe.png", "fire2.png", "safezone.png", "rain3.png",
      "bus.png", "fire1.png", "event2.png", "rain1.png", "dice.png",
      "bag2.png", "earthquake1.png", "ok2.png", "warning1.png", "firstaid2.png",
      "event1.png", "earthquake3.png", "light.png"
    ];

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Initialize board grid
    for (let y = 0; y < gridSize; y++) {
      for (let x = 0; x < gridSize; x++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.dataset.x = x;
        cell.dataset.y = y;
        board.appendChild(cell);
        cells.push(cell);
      }
    }

    // Generate snake path
    const visited = Array.from({ length: gridSize }, () => Array(gridSize).fill(false));
    const directions = [ [1,0], [-1,0], [0,1], [0,-1] ];
    const path = [];
    
    function isValid(x, y) {
      return x >= 0 && y >= 0 && x < gridSize && y < gridSize && !visited[y][x];
    }

    function dfs(x, y, steps) {
      if (steps === 0) return true;
      shuffleArray(directions);
      for (const [dx, dy] of directions) {
        const nx = x + dx;
        const ny = y + dy;
        if (isValid(nx, ny)) {
          visited[ny][nx] = true;
          path.push([nx, ny]);
          if (dfs(nx, ny, steps - 1)) return true;
          path.pop();
          visited[ny][nx] = false;
        }
      }
      return false;
    }

    visited[0][0] = true;
    path.push([0, 0]);
    dfs(0, 0, maxSteps);

    // Assign images
    shuffleArray(imagePool);
    const usedImages = ["start_yellow.png", ...imagePool.slice(0, path.length - 2), "goal.png"];

    path.forEach(([x, y], index) => {
      const cell = cells[y * gridSize + x];
      cell.classList.add("path");
      const img = document.createElement("img");
      img.src = `${usedImages[index]}`;
      cell.appendChild(img);
    });
  </script>
</body>
</html>
